# åœ¨è€ƒåœºé‡Œï¼Œä¸€æ’æœ‰ N ä¸ªåº§ä½ï¼Œåˆ†åˆ«ç¼–å·ä¸º 0, 1, 2, ..., N-1 ã€‚
#
#  å½“å­¦ç”Ÿè¿›å…¥è€ƒåœºåï¼Œä»–å¿…é¡»ååœ¨èƒ½å¤Ÿä½¿ä»–ä¸ç¦»ä»–æœ€è¿‘çš„äººä¹‹é—´çš„è·ç¦»è¾¾åˆ°æœ€å¤§åŒ–çš„åº§ä½ä¸Šã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„åº§ä½ï¼Œä»–ä¼šååœ¨ç¼–å·æœ€å°çš„åº§ä½ä¸Šã€‚(å¦å¤–ï¼Œå¦‚æœè€ƒåœºé‡Œæ²¡æœ‰äººï¼Œ
# é‚£ä¹ˆå­¦ç”Ÿå°±ååœ¨ 0 å·åº§ä½ä¸Šã€‚)
#
#  è¿”å› ExamRoom(int N) ç±»ï¼Œå®ƒæœ‰ä¸¤ä¸ªå…¬å¼€çš„å‡½æ•°ï¼šå…¶ä¸­ï¼Œå‡½æ•° ExamRoom.seat() ä¼šè¿”å›ä¸€ä¸ª int ï¼ˆæ•´å‹æ•°æ®ï¼‰ï¼Œä»£è¡¨å­¦ç”Ÿåçš„ä½
# ç½®ï¼›å‡½æ•° ExamRoom.leave(int p) ä»£è¡¨ååœ¨åº§ä½ p ä¸Šçš„å­¦ç”Ÿç°åœ¨ç¦»å¼€äº†è€ƒåœºã€‚æ¯æ¬¡è°ƒç”¨ ExamRoom.leave(p) æ—¶éƒ½ä¿è¯æœ‰å­¦ç”Ÿååœ¨
# åº§ä½ p ä¸Šã€‚
#
#
#
#  ç¤ºä¾‹ï¼š
#
#  è¾“å…¥ï¼š["ExamRoom","seat","seat","seat","seat","leave","seat"], [[10],[],[],[],[]
# ,[4],[]]
# è¾“å‡ºï¼š[null,0,9,4,2,null,5]
# è§£é‡Šï¼š
# ExamRoom(10) -> null
# seat() -> 0ï¼Œæ²¡æœ‰äººåœ¨è€ƒåœºé‡Œï¼Œé‚£ä¹ˆå­¦ç”Ÿååœ¨ 0 å·åº§ä½ä¸Šã€‚
# seat() -> 9ï¼Œå­¦ç”Ÿæœ€åååœ¨ 9 å·åº§ä½ä¸Šã€‚
# seat() -> 4ï¼Œå­¦ç”Ÿæœ€åååœ¨ 4 å·åº§ä½ä¸Šã€‚
# seat() -> 2ï¼Œå­¦ç”Ÿæœ€åååœ¨ 2 å·åº§ä½ä¸Šã€‚
# leave(4) -> null
# seat() -> 5ï¼Œå­¦ç”Ÿæœ€åååœ¨ 5 å·åº§ä½ä¸Šã€‚
#
#
#
#
#  æç¤ºï¼š
#
#
#  1 <= N <= 10^9
#  åœ¨æ‰€æœ‰çš„æµ‹è¯•æ ·ä¾‹ä¸­ ExamRoom.seat() å’Œ ExamRoom.leave() æœ€å¤šè¢«è°ƒç”¨ 10^4 æ¬¡ã€‚
#  ä¿è¯åœ¨è°ƒç”¨ ExamRoom.leave(p) æ—¶æœ‰å­¦ç”Ÿæ­£ååœ¨åº§ä½ p ä¸Šã€‚
#
#  Related Topics è®¾è®¡ æœ‰åºé›†åˆ
#  ğŸ‘ 88 ğŸ‘ 0

import bisect
# leetcode submit region begin(Prohibit modification and deletion)
class ExamRoom:

    def __init__(self, n: int):
        self.n = n
        self.students = []  # æœ‰åºæ•°åˆ—ï¼Œè®°å½•ç°æœ‰å­¦ç”Ÿçš„ä½ç½®

    def seat(self) -> int:
        if not self.students:  # å¦‚æœè¿˜æ²¡æœ‰å­¦ç”Ÿï¼Œåˆ™è®©å…¶ä½œåœ¨ç¬¬ä¸€ä¸ªä½ç½®
            student = 0
        else:
            max_dist, student = self.students[0], 0  # åˆå§‹åŒ–æœ€å¤§é—´éš”max_distï¼Œå­¦ç”Ÿå…¥åº§ä½ç½®
            for i, s in enumerate(self.students):  # éå†ä¹‹å‰çš„æ‰€æœ‰å­¦ç”Ÿä½ç½®ï¼Œæ‰¾å‡ºç°æœ‰é—´éš”æœ€è¿œçš„
                if i:
                    pre = self.students[i-1]
                    d = (s - pre)//2  # è®¡ç®—å‡ºå­¦ç”Ÿiå’Œå³å°†å®‰æ’åœ¨[i-1,i]ä¹‹é—´å­¦ç”Ÿçš„é—´éš”ï¼Œé™¤ä»¥2è¡¨ç¤ºå°†å­¦ç”Ÿå®‰æ’åœ¨[i-1,i]ä¸­é—´
                    if d > max_dist:  # å¦‚æœè®¡ç®—å‡ºçš„é—´éš”å¤§äºä¹‹å‰çš„æœ€å¤§é—´éš”ï¼Œå°†å­¦ç”Ÿå®‰æ’åœ¨è¿™ä¸¤è€…ä¸­é—´
                        max_dist = d  # æ›´æ–°æœ€å¤§é—´éš”çš„å€¼
                        student = pre + d  # è®¡ç®—å‡ºå°†è¦å®‰æ’çš„å­¦ç”Ÿä½ç½®
            d = self.n - 1 - self.students[-1]  # è®¡ç®—æœ€åä¸€ä¸ªå­¦ç”Ÿä¸æœ€åä¸€ä¸ªä½ç½®çš„é—´éš”
            if d > max_dist:  # å¦‚æœè¯¥é—´éš”å¤§äºä¹‹å‰çš„æœ€å¤§é—´éš”ï¼Œåˆ™å°†å­¦ç”Ÿå®‰æ’åˆ°æœ€åä¸€ä¸ªä½ç½®
                student = self.n - 1  # å°†å­¦ç”Ÿå®‰æ’åœ¨æœ€åä¸€ä¸ªä½ç½®
        bisect.insort(self.students, student)  # å°†å­¦ç”Ÿçš„ä½ç½®æŒ‰ç…§é¡ºåºæ·»åŠ è¿›æœ‰åºæ•°åˆ—ä¸­
        return student

    def leave(self, p: int) -> None:
        self.students.remove(p)   # ç§»é™¤å­¦ç”Ÿp



# Your ExamRoom object will be instantiated and called as such:
# obj = ExamRoom(n)
# param_1 = obj.seat()
# obj.leave(p)
# leetcode submit region end(Prohibit modification and deletion)
